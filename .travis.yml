language: php
php:
- 7.1
node_js:
- 8.11.2
cache:
  yarn: true
  directories:
  - node_modules
  - vendor
before_script:
- cp .env.travis .env
- composer self-update
- composer install --no-interaction --no-dev --optimize-autoloader
- php artisan key:generate
- php artisan migrate
- yarn install
before_install:
- mysql -e 'CREATE DATABASE gens_test;'
- sudo apt-get update
- sudo apt-get install -y sshpass
script:
- vendor/bin/phpunit
- yarn run production
after_success:
- "./deploy.sh"
env:
  global:
  - secure: DXzR0PD1BHoEbnO5F0+5WHNru7GWLVguu31wHqYFCalXEbood2cfy4qBhZsK+i9b12HqcT2BdOUFYA4CvqT1NCXPlC3BpSodDTHCkPe+W+rDOFL02zQBiPu8QTO1JfDHL5KKSEkXpiwRrVcG/AYcvAmiWBSEkz4ZRZuSr+r2obTRCj6Ckbjhxpe6sQq+TBjY6ioYmp1Obmr3xEHyzICPOGa2Nssop+7V7LdflpfGmioLdwaGib7T9plmRnxowBLgKrlbnHilmmwA8sQzuQpSjRK7jXs8E01Ed/t1ytlHNDdWPWAebunjShtEAuXkiVF0DFEyy753Dxmg7GZdHUEUUcPpr51t3eWgcJTd40dRUoWA/siUVhw5v4VWuFyM2j4sR1dySx3RfMkOvMnkd9WVgcbL6c/P61EUFUR7y5CsAxSx3y9EvruHge6NS+iwBolNxdrdMpj/XgLtwENAEPrH5OHMj1vga1Y/dOMkE97jhO5+GljQAunt8fb1gXPNY8W8VGyPkYyq4tiGBlXjbbt2zNUTDs8jAijy+wSm0/g8/HMjHIOaHAaym4pVTG3f0ARxFfld+4/qxd/cUaJOHpvKz2BVsLXaE0ILGoOT2xF1JRe+Gog06fRwhoOotBlLko0EydgP8QJRe6vtT5jYmPEcH90CH48hN8MiCrZAYzrxzew=
  - secure: eOA7iGaiF7+HIOdSej+Cr+ccyoGDL8B6ACzwXe04DTFEWms6YptNMogrXznFdAWYWzyZrEzidYbseXrbXf3QBPNwEtEUBXwOcM76FYtHe1V4zAEmqAONKLGZS60Gfcv3HUpg7cQt+Q6r/RAwWYg0ubjbJWn4FRSAZ5g3GwRDFJTY6OTlsCDNfVZrlCDCG+UaZ8579EYvnUfC+F9D+UB1qJLu33Xdu2aqD7vldbeWwnDt7msJAppcpOuysud+2Y5vddkAPLe/PkiGgDKYXczpDzNUNbr+LITEb3nj3cLGUbQoyS9twuuH8KA9Owf9BukZANMtoYJ+sbgU1fBDeby5qrqAGOmTSSTVc/3VB43veySdVleZYfGVv/h/Z4eQPWSSk7yYQegRxnD7VrnLDRSyYeVzS6m2Z1LqDqmlEla4J143R2xPyjD83wibDkb8a+JQi7wzN3v66hr1RFohCd5N8cuqVmDF8U9w6SUw/i0PM1rq9k6adN0UYXA8QMXqpA7eJScymbbHLV764oelWmc9MQ1KTLymjY7qcPTUcwwcVLKE03nUCj+BrnL4zJEWf0BLykYi3VQFeFYCtapMQFRqTz8Dh+prTMurMue4KJoeYKbBKpmt14Bsikq9YOxDL32ofbSo/+wr0KNd/OLF0MLXNc8pzxXdwe478H8MJpH7Ic4=
  - secure: p2XOqKEs0LAcRx6WhsGA+xjZA0JNKANKOMpBJlKctyWKLYTzXVvB5JSu34vcdvMyyO8hPhl29R/5QUpkSb77yHkhkE6JEhdbWT9NZ76gAAw4UdhAHv5883bu851Byqc4DvDBzioJM5+fDhU3H2YohPWhW2n+GuVABKfOuQy8uvbV55yG1LvbLXLwTcj9KCqbszX430ikwxkirpsNZDUO5iwN2WN7kRRYlA7RxW6e2mnl+aDvaw9hJq/1DOtzeDl6ErZ6yPjQF332SRS7sbq4PgRkEm4vmLMJFf+OJ8BgeL+tE57nCtWFKRV9/pOSlWlwOC9hKUsEPInGGo3m0dm8BLZFD9VK937U93M7fvtBtnFcOM/pWMXxN2rwgGBkYp8z2j5MrnF4iWoOw+8MM2k+z/UxalawXPRmv+UmRul3ECkNbg/AMgBn/3uHRB16hBnrh2IToSFDFTmOwdKLLKH4jxFT9k0RZjUTI+H/mNdlQ6JjwybJQKU+B+XWQnmrd2+MkjebK94niWy6eXGfAn15xU5htjtjDzc9i9OEDsPdede3/npzpa443CUXhLL0bsDQyvJDx3Q/+uTQ0l+hxP7Lp3HKU4FhRrPLuA1yjdnsCsRcdvkV5fWQMfvYjKi9/lclMPUc9/GSQ8iRObP5gAja728dKsjxoEn2sIj+GzFhIF4=
  - secure: XoGvgVWKNTWEtV8xy14EZrzDXuC38jZvHbfJmZ6CfVWWfG/xNZ4dBjSNbK/BRgPtC0NcDPIMqIf0TPaWKJg4ZLWaZi6R/m6n9Ah7nG0I74JnJN8t3uyTDdh5ESt9YmArNZHYsOw5OhIak/om2aDMg9u+ebPoOog2ny4a2YindDGA9ebwAN4xEo1KiXhFspeg2v2dR2JzMcJuHJWMSg+bLpeMDF8NBn1APzOkAsqVoNt6F6+ISa52JoR8Eqv20LW6d9HrwGeW7xIKuM3NZVoAU1/PNjNfyTdlJtQufLpw57R8pdtrM97FqBZ1Eluu+/2H/BuXlTHZTFvb+jQ/84fX0sUmFDGLjkuiECW7VAo8fJOElpmsMZoa2WXhxvzI3wsHDZyAt3rTHzE+UTfk9MKli9BPY0W5i8X8DtIKz7VwJnqowedy0aJDiHG/sIz1saD3jcxMjrUNVVFGTaTpVBNvD6kXa6/yoz+w10yvwFQzZpgVGveiwiD80Mfh8qg1HahtMZiYQKNaHQi+zlcW/AwuLChkMMrr70ipOkTHn4TaQ1u6ejR80NGdZXWDx0A2o7e+TrmFp9G2PtGHaf1wyveqg1hjyFenQhxVlXkJJvqcd0eETjNOIJLJODGVmggi2EH1TK1zXzvuDsspSWsEl/b6YqPxsDmCmNKrEJ1p29MeyuM=
  - secure: LQWVmrfPNgayVMjzUYJ0VT61FzpDb5gSR+Rrm1zrIhkeWCCrOsmlbI1rX9aRl3R+9oUI9y2nWwpFmLarVMfmkdsBiLI/87g3u8CdHauAsVyW4xGJPzBHzLmY/SqcMhmWLcPOCsj65nOlLbouiYi2CitIbmUHFy+y6QWXT41tApks0Hqyd8UjlfJ0hlo95yGOhyJE+iAzekmveAaWOVgUMmHI6t7iFbdDN3MHjZDe1LdgBTvYSrXNzEvw0vZ8YExx2dChjcGb0eUn8QfkG9gSeV2Kt8UHX8kdqfeJs+82yR9NaIZBn7jJFENWdggloioC/CG27rMWVFndwLb+cdm/ClgE+hwmkp/CaFRYqdpOhZp73Y8fv7dy14XPdfhO+9vpBmHDKnxNK7LPOG5vpcapZ+LK7H/dKFrFQi3BinDj5qV6wOHtyBQcp6FQV3UFa6kAbY/6tVlRx/H9WsN6iSOWslpYyq5kd2e9a3NkYkZWL6AnbKXqGeDljbRfLWDR1XoqKE0jkYnFFdxlO3Owm1yHH+rr/ny9nlJ7Lg6YJsN70Bki0sh47duZ2eNocC/CcK/ulQG4AU/+cUqulNd5AbBHBLImI4FY4/qHZfsegML76lmnwzpai7DdldNqDQAjawGw05gQ1P8q8uKy/E/AGKZonPuaiOhW483UHciVzLGLuMQ=
  - secure: UEnEJapsLAdDBRolpCpykPU9FDyYrZgVlNt7/T7OIQuKudLuq3A4qN4tEjOIYDsVM+Be08wbPo0KsZgZixzv34NT7kHnp+cyEIsUbQGbsn3+iJAscvRm90+cEywtQ93h7hiX1nTGpj1tmuwR8rjGMUUKNHL0KjoT5G7FZ8hPdRLWsDjwLQnejtHC2828P7wFv5/LtFvmv3X0D7jr79LxwuH/FeU6+Nwmvi6Vs/5npkLhoOvESlYI9NkRnRGoW/dhx7426vhWjOiMkvDbVhVd3nbXj31Kh6upJJJQIEXzk6J6TwfMU8BbjSlxYCiV7MJ+I841ZNuErrCmLds3D6/c2CzeWCLFKnyVflj6tHo7lRoQIBHCFTCq7FQdE79dXkDW26J9UYEUkCRYW/KjcU8YlI5cgd3aVXcwCSwZq0bCIdtEvgGrmm6lNmf0SYITE422xsR9Fjcr892JEgLQ1BGW0uiNvkcVEd2aphzR66hdh5ZgImWyq8g1xl1OtnxfRU5IlEFWZF+wdTDlE6VSfHVvxNqIhQU5aKsh9mjfA+S4lb43FVbC+9iL9u/D1AFC4YwP7ziH03heK81NmUuq8wp6litGXmUz1RjmOE5fGw99+S2lxdBcUoGYawdvn5nAbGa9aBl1a4q3VA/EdbKKkY820Gi/whATePMoA1uV92XpE9I=
  - secure: DZ1/xL3C1nuO4tgAm7kbBS8zYksAEaHh07pq5anxYBUaZqoRX/Jdha/PdtYTGmpZWaFKfeFxHJeahaSHi5HA5rvLO5qcGp16n+NLTAAWKVSbQeZinyU8R5mXxt/I9vgdcFVBCS9Ej372KDD2Qt9R+35RueDPzBD+UPQPLoqjRkLsXkfEDOmSl4Hgn7d8/xJfhAih5l6EEyfByHBxITMffLWprRgz9hF3wqsASjCDS3+lCH76P6aRgmoghGEj3fNRNbZhGhf9IVbBY3cKG3X7lCbE6+qgW355CCU85/nHhKp1YVGLx5NgwI8cdAu1ZJ2aFHmvTNkjvtrVbrKtxSsoZKs/yILTWV5EoD/BHSeG3NtUoZ3nwVwb8WqLmYpPZ0MGmcVw3DDu1mLq6lNIb5qIYUZ4MdYIv/MBu6Sryb4IDOdB8Fr05tIiAJR4XZD16EjNKy9BcXNTOuG78mOeax3q2TTcsCCoV3Iz8bzjxi5lNdZ0hHoAqDDt+a4B6OtvGqSfJDEubHZQ2gsMpeBaAgCAWfB05Cj5omNbj1WZ467cVIkcnmeZtOaJhWYizQlWKtGP0PDm8UaUxxxDBhvurBfv/QTOqq+h0DXx8q9e+N2bKrZ+H8UW3cKocZzrobsbTC7CrbHyC6bTkrW2tZnWg0iebqKJK9E3TiR/mvvmPF/fca8=
