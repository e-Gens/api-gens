language: php
php:
- 7.1
node_js:
- 8.11.2
cache:
  yarn: true
  directories:
  - node_modules
  - vendor
before_script:
- cp .env.travis .env
- composer self-update
- composer install --no-interaction --optimize-autoloader
- php artisan key:generate
- php artisan migrate
- yarn install
before_install:
- mysql -e 'CREATE DATABASE gens_test;'
- sudo apt-get update
- sudo apt-get install -y sshpass
script:
- vendor/bin/phpunit
- yarn run prod
after_success:
  if: branch IN (master, develop)
  - "./deploy.sh"
notifications:
  slack:
    rooms:
      secure: ktvWbrgA+2ufyUPDCijAEHkOeP82ZyQRkMMQzAvzZjbl56ypjeD80a12OAyJue2+zVQ9ceWQ5hSfpF2NGgwz6i7U2THh4ZxFBrhFSKBq5gaUDemkZaw0PU1T4YjbArCHiSDUyO3fc7Tt2yjD6Pf7pA2PIkZNZN5NG6l0Zg8rqE+2Rwzz6I73ZlsP93mcZLY9sy3a9s7lEFGb4RSmf2xXHNIf5CoilRWnGm67cm9ZJhAXL3GkOFwVbrrE+mos1+2ifg8HYfNB9SL+4We5tY+scCNyb2RW5ux2Gh+L37/m146RUGxH4WX6WiJsB10BuJV/5WSXpCsn9FaElR9CF6ZFjsMGvS+HZwVDq9O6nBjEMPSouzj9PYk4b0Mba8TdeuWatOiVxKaKRUSkAR2NkBBVtXY7RRCIcYA6MXJPACKkvkC3qpgLVsN1afaKtkKVhC24t588iomAp3iRKkNsLS1gtCYGWE3nfe3mfwM+UjY00JOOY8KWD5vwHc/dD5MLIvE7faJ1y7+VL/z7hd9CfVTaSFeFITW07zMEljBsh93NM3sf4ZpBEN5LaL38DCmOCygwHLKrY/jjHK3+GytW6Rh2uEt1vV/1/XSVPeB6XPL2RZ6bSU6RGRq8jRW4AvoZRrkutouNgd0iynLeYyGkGHPBivMqCFSm4JHVPKiqxg2elkI=
    on_success: always
    on_failure: always
env:
  global:
  - secure: yEMZ8EOCrmbqFBewjr/fkbECBQpDs9htqj0KHMOPOoT/r5bY4Ikx6XRqd7y/jnIEJtFFD2qvoVGffkKp3uaJYYpNAgiRQaO+qsksQXChwAyUO4oeHR8TrFQp39pLYA3nWvX0GTsrsbg+Swqc0/avioCSqVHzDOZa2YsssORcKjDHH6Lnmcc4YtU6191HNCrgTX3hP62qmVzDriORAhnkPuDBp2yPClhQ+RevvGTNlyWKPihO+HyXAZgsgEEoiajfYFza88J4l3uCGAZQL3YtbrqA0q+l5HjINPIQga6Cnnx6oS0UxdvvhayohguBLwoPtHRnLE6E9dl6LvFEJSz9XPwBqfbg6mbhn4LVRKionRGvpXoSbP+gBX1Qfq5MYepEwRDC8Wsd5Hm9K7JeSEGCP8T2cyn/h5ozMd4uxNzKsfDLAirRExaOsq2zSX9hVlE/vlW6KCx3DtMdKa0u64zHtRcQf/CqwG4rxz1uNaNvnkYDuGirUqxQCbq1l8SDHqx0GSPzUlSEmUCkPq6iEsPSFFNuXXspX4RgbBPfCauRBVVYUDd3TaYz/jbcsVwH3SI93/ItvUHQ3WIuNjqrNXOpQGgi05vHqWM+ZJxGX71FqMTpCFHUeKNIk6Zpe3cgJo4DOincraxy6jqTFvBBnSvh/6SXeEtD50muHrc/aM1rBPg=
  - secure: RYO+jsoB+apj2RR3S53nTgys+x+7Bn6B12MshYkglneNvbCcJaEIZEov+9uzR3HiXsn2droQXjtDrAqF4GYfQShlBoc3H9G9KvKYw7xpPRqCZ8ZRfHLflN9VsRxdUzJOqTrglJS+Zbe1DrEmtSynVUSHV02LuanQ9mC61D0BiO2Z2UbLtJHl2eQVAv1R4vHBzcyzcRfOctuXMaDmcUMcryi1iyhBNpYyBj3W9xwsgF1yu5UgOT4c6DqNCAlLuVTSTTTaGGfQiHDUP7YXOcppI2rW7M5fGBPxRfmHvXtY9Fi04jsOvFwMnMdcc9pyHFljdLLxkuAbAHghi1qaDksGBPREzND7qquyhBSqJC21cnGfai3a8jK4mcWgSpiAXXJZE7lQfze2QE8MSbKcHhNz9Q6ME+L+DEax2wq5jV9S0aXMkis7TOmFJDxl//1sHkj8gzU5D00cn3RERLc8r0z7l25/eLF6cRqd7SwIKujKOArV+oirqO2+okNC5VjV43GT922gntPaJCVYWAtYNrfc0HbcX0evxUwwESZVYFR86E6xOX/KnIqfLRyClihjZNthP3CVeQI+KyhMyN4mKSCpEfKXiQZwAU8b7LAq4l58qbYsVAA31wRW+gJMvQemFxDISbydPUpGRtHgC1HU4We05y112j8oRkBXda+yRfyoIUA=
  - secure: B2iN4wQUnhkmFJKDoSVdMloVkejZkACuyaDUPhbbdK5ZzM6C0q/WDjaMcxJ/zDdEt+C0lN+iKKoyQMLQt0No0ebK+WV2jKTU2yNsC5Oyb3sdrKWjBqDz5EAOUz7+01SBpyAz+M5VWdVe0wy2r/OvvJpE3KoFITheKQceKFfs2/dFUEBc9bI91pljorwAUClMgtwJmyK3jGTYfJ4ILS8JLL/n8p/0j6kidbB2Zd/F+ouKPNEP5UPg6FbuzhkR7OVUSf5BpZv+GYu/GIBw3Pj1aQH1xhq6c4zzSSJtKzNzPIHTH0FK22XKgFph/xVIZdoPHb/F5yeI4HxFf2sbEDX45AtUrGLok1l1SfhVB9RYuMoJIvKEc1DOMkVozSQZEwcGrTE8LZ+DQQIdTgFA54UHKua0nJPwQWhYd3coAF60l4gKu9mxrOk3ArPGrUcMc+UPBoK3Ms4HaQV+FbM7znHKopQBP64QJABj2jIFv3Jexbb0VA+kXNxLoqoi4nuNqKkKZjH/2Z2i0e1LbbRuK9VzJJ/PgYEPJcdfFjvAlneJFK0avo/LHZ3qgyyvHXQdkQ9DLPTl2ddoTc6LsJhMZfPUJdqcBMvXpT5SBvBBHrf+jEJCTz/w4jF3SugispvG1Cio51/BGVtAUbw5MUZSt5JIHuXKRKicntsyxfzTWXCYZFk=
  - secure: hRJN0FebSL76ZHuftx3MIQp+b0wcrRDi/zww+uwnGtCQ0UzdzqWBqx6ERuD2xN0S6BaRhMWH1qoqneCMaRdCujAEn22hYVHs7aFrLeEIApTIrd4MuLPjF8r6wmw3Y9muS4ZOmBeT3XUbxMl0RrWh5MLQp2QwYmIklkfSg7B/mdi5tKDfF4PYAqGAEnDzVvNFP7HGFcuq9RUqMSz7/0PAX70+S6AnGn83QVsP8y1R1utnlxtlngpSjwvz6iaGm8SnM7lUEcB0N7KoxEUvnbrLWzTPP3qNJmxwtXJ0eTuKiqNBLXFihUdPmrKPbyDOHtZS9EiapduYrEh5DOr0tCsOCVGStiH1lIO05RKhbADWbLK1oRffBnOprNDqDnf8NMsU3t3Q81IiKtbAAn+nibuTEFjtkQPjqOa8NnqBuHq9lUa/60BguBwySQMoSCEd9z9fxOhIhZkR7tbBLKUE8cIFSYqsTtVkh9qqgw9+c7shCsYGmRj9YG8sfEK+P1O2H1NixX+K5Wu2ys+T9x7zF7z9h0QuJ4wOJE1GjHvT0sbG8/4/EA7pDgSbu2XnwSEhGdsbm8gbN9mGry58Q+x2QZCVV50EA4cor75Oc7YOCVPcoykQZ01N7cBnWTTTFs2F0JEEzKigvdwnjoolXTkhe6q+kTpbe5Ao2OywPVAivHgygho=
  - secure: mJUghWs6j9v+msKO8I91JGBHMi8uHimL0gfg/5gxXlgxjknMtMQAC8YJHf11+CrK8jwiA9cwgE7xk9ky6rsgiRmrYdykl2y3YmQeRCpUVjIoBkuycGYuJ6ohSJaTZo7P3X+mPNAmQLV4c8ATQtZsL3Eds9Goz9DXnwUoZRJ0kqmOdzD9yE96/c0P6m/w56u3O/hgVz/35bDz3eoXpDtN1DXpZJBmYeE/SxI+wUWTAOpNOvvZvdZhIiJjZ+mGE3hqnt72z5iodxtmAV79ASe6G5OWFamF6nJjzJZ5KS6MdzNA33p7kLjTjunAfxomayy42mq0cOBrVkUOO1UJ7fR0bo+qNTADMpJ2MzLi+eYZK1jTqjM/GQ8TSbGTEIu3oc0Yzey0r55IyjI7sdNCYElZnsrzEF7y7l11FL4LZgrrlV1FBC+CT06lIqQ/KlBbc+Ozbor3lbWtAhbi1HHpXLh7GiIu4WcBHFBqvw+ANEDQ5TTeXqaAdBWUD1/2n0ghZT+qUYyHJlK7K2KL+n0os/V7NZNchNY3DCpQCvxdL7naKfFjs3/aZC+r5ChGDNuIlWf9JIT1G1qQtruX+tRp7NF2SiJlVFNc/uAkAuM/T5t7cBPlDVlvrrkqLfETuqX/FpwXT/0gtH/nDy02yFVJHFy66tqDR4sycBFde1cseZHtAgI=
